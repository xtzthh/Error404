<!-- Team Name Error 404
  Project - AgriVault 
  Edited By Yash Patil

-->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="google" content="notranslate" />
<title>AGRIVAULT ‚Äî Tactical HUD Dashboard</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="index.css">

<style>
  :root { --accent: var(--neon-green); }
  .app { min-height: 100vh; display: block; position: relative; z-index: 10; }
  .grid-layout { display: grid; grid-template-columns: 280px 1fr; min-height: 100vh; }
  .sidebar-hud { background: rgba(5, 7, 10, 0.95); backdrop-filter: blur(20px); border-right: 1px solid var(--cyber-border); padding: 30px; display: flex; flex-direction: column; justify-content: space-between; height: 100vh; position: sticky; top: 0; }
  .main-content { padding: 30px; position: relative; }
  .topbar-hud { margin-bottom: 30px; display: flex; justify-content: space-between; align-items: center; }
  .card, .big-card, .metric, .weather-card { margin-bottom: 20px; }
  .value { color: var(--neon-green) !important; text-shadow: 0 0 10px rgba(0, 255, 136, 0.5); font-family: 'Roboto Mono', monospace; }
  .brand { display: flex; align-items: center; gap: 15px; font-size: 24px; font-weight: 900; font-style: italic; color: var(--neon-green); }
  .logo-square { width: 40px; height: 40px; background: var(--neon-green); color: var(--cyber-black); display: flex; align-items: center; justify-content: center; font-weight: 900; font-style: normal; }
  .grid-top { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px; }
  .content-row { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
  .chart-container { height: 250px; margin-bottom: 20px; background: rgba(0,0,0,0.05); border: 1px solid var(--cyber-border); padding: 15px; backdrop-filter: blur(5px); }
  [data-theme="light"] .chart-container { background: rgba(255,255,255,0.4); }
	  .metrics-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }
  .btn-demo-top {
    border-color: var(--error-red);
    color: var(--error-red);
  }
  demo-alert-card {
    border-color: var(--error-red) !important;
    box-shadow: 0 0 18px rgba(255, 68, 68, 0.45);
    animation: demo-alert-pulse 0.9s ease-in-out infinite;
  
  }
  demo-alert-card .stat-value,
  .demo-alert-card .military-tag,
  .demo-alert-card .block-icon {
    color: var(--error-red) !important;
    text-shadow: 0 0 10px rgba(255, 68, 68, 0.45);
    filter: drop-shadow(0 0 8px rgba(255, 68, 68, 0.45));
  }
  .demo-alert-card .stat-value,
  .demo-alert-card .military-tag,
  .demo-alert-card .block-icon {
    color: var(--error-red) !important;
    text-shadow: 0 0 10px rgba(255, 68, 68, 0.45);
    filter: drop-shadow(0 0 8px rgba(255, 68, 68, 0.45));
  }
  .demo-gas-card {
    border-color: #ff9f1a !important;
    box-shadow: 0 0 18px rgba(255, 159, 26, 0.4);
    animation: demo-alert-pulse 1.05s ease-in-out infinite;
  }
  .demo-gas-card .stat-value,
  .demo-gas-card .military-tag,
  .demo-gas-card .block-icon {
    color: #ffb347 !important;
    text-shadow: 0 0 10px rgba(255, 159, 26, 0.4);
    filter: drop-shadow(0 0 8px rgba(255, 159, 26, 0.35));
  }
  @keyframes demo-alert-pulse {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
  }
<!-- Team Name Error 404
  Project - AgriVault 
  Edited By Harshal Mali

-->

  background: rgba(5, 7, 10, 0.95);
    color: var(--neon-green);
    font-family: 'Roboto Mono', monospace;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.04em;
    box-shadow: 0 0 18px rgba(0, 255, 136, 0.18);
    opacity: 0;
    transform: translateY(12px);
    pointer-events: none;
    transition: opacity 0.25s ease, transform 0.25s ease;
  }
  #indoorDemoToast.show {
    opacity: 1;
    transform: translateY(0);
  }
  #indoorDemoToast.alert {
    border-color: var(--error-red);
    color: var(--error-red);
    box-shadow: 0 0 20px rgba(255, 68, 68, 0.25);
  }
  #indoorDemoToast.success {
    border-color: var(--neon-green);
    color: var(--neon-green);
  }

  <!-- Team Name Error 404
  Project - AgriVault 
  Edited By Shlok Kumar

-->
.ai-inline-loader {
    position: absolute;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.06);
    backdrop-filter: blur(3px);
    z-index: 5;
  }
  .ai-inline-card {
    background: rgba(5, 7, 10, 0.92);
    border: 1px solid var(--neon-green);
    padding: 16px 22px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    gap: 14px;
    box-shadow: 0 0 20px rgba(0, 255, 136, 0.12);
  }
  .ai-infinity {
    width: 56px;
    height: 56px;
  }
  .ai-infinity path.track {
    stroke: rgba(0, 255, 136, 0.25);
  }
  .ai-infinity path.live {
    stroke: var(--neon-green);
    animation: infinity-loader-travel 1.2s linear infinite;
  }
  @keyframes infinity-loader-travel {
    0% { stroke-dashoffset: 0; }
    100% { stroke-dashoffset: -100; }
  }

  .login-screen { display: flex; align-items: center; justify-content: center; min-height: 100vh; background: var(--cyber-black); position: fixed; inset: 0; z-index: 9999; }
  .login-card { width: 420px; padding: 40px; text-align: center; }
  .login-card input { width: 100%; padding: 14px; background: var(--input-bg); border: 1px solid var(--cyber-border); color: var(--neon-green); font-family: 'Roboto Mono', monospace; margin-bottom: 15px; outline: none; }
  .login-card input:focus { border-color: var(--neon-green); box-shadow: 0 0 10px var(--cyber-border-glow); }
  @media (max-width: 1100px) { .grid-layout { grid-template-columns: 1fr; } .sidebar-hud { display: none; } .content-row { grid-template-columns: 1fr; } }
  
  .block-icon { font-size: 32px; margin-bottom: 10px; filter: drop-shadow(0 0 5px var(--neon-green)); }
</style>
</head>
<body>

<div class="mesh-bg"></div>
<div class="scanlines"></div>

<div id="loginScreen" class="login-screen">
  <div class="login-card cyber-card">
    <div class="corner-br"></div>
    <div class="brand" style="justify-content:center; margin-bottom: 20px;">
      <div class="logo-square">AS</div> AGRITECH
    </div>
    <h2 style="margin:0 0 8px 0; color:var(--neon-green); font-style:italic;">LOGIN</h2>
    <input id="username" placeholder="Username (judge)" />
    <input id="password" placeholder="Password (agri123)" type="password" />
    <div style="display:flex;gap:10px;margin-top:8px;flex-direction:column">
      <button class="btn-cyber active" style="width:100%" onclick="doLogin()">Authenticate</button>
      <button class="btn-cyber" style="width:100%" onclick="useGuest()">Guest Protocol</button>
    </div>
    <div class="military-tag" style="margin-top:20px; font-size: 9px;">Credentials: judge / agri123</div>
  </div>
</div>

<div id="app" class="app" style="display:none;">
  <div class="grid-layout">
    <aside class="sidebar-hud">
      <div>
        <div class="brand"><div class="logo-square">AS</div> AGRITECH</div>
        <p class="military-tag" style="margin-top:10px; color: var(--neon-green)">[ SYSTEM ACTIVE ]</p>
        <nav style="margin-top: 40px; display: flex; flex-direction: column; gap: 5px;">
          <a href="landing.html" class="nav-item"><span>üè†</span> HOME_TERMINAL</a>
          <a href="index.html" class="nav-item active"><span class="glow-icon">üìä</span> INDOOR_DASHBOARD</a>
          
          <a href="agri-storage.html" class="nav-item"><span>üì¶</span> STORAGE_UNITS</a>
          <a href="warehouse.html" class="nav-item"><span>üè¨</span> WAREHOUSE</a>
        </nav>
      </div>
      <div class="cyber-card" style="padding: 15px;">
        <div class="corner-br"></div>
      
        <div class="military-tag" style="font-size: 9px; margin-bottom: 5px;">SYS_TELEMETRY</div>
        <div class="small" style="font-size: 11px;">NODE_ID: <span id="channelLabel" style="color: var(--neon-green)">3214038</span><br>BUILD: demo_v1.0<br>LATENCY: <span id="latencyVal">42ms</span></div>
      </div>
    </aside>

    <main class="main-content">
      <header class="topbar-hud cyber-card" style="padding: 10px 20px; border-radius: 0 0 4px 4px; margin-top: 10px; margin-bottom: 40px;">
        <div class="corner-br"></div>
        <div style="display:flex;align-items:center;gap:15px">
          <span class="status-pulse"></span>
          <span class="military-tag">COMMAND_CENTER</span>
        </div>
        <div style="display:flex; align-items:center; gap: 15px;">
          <div id="langSwitch" class="cyber-card" style="padding: 5px 15px; border-radius: 20px; border-color: var(--neon-green); position: relative; top: auto; right: auto; z-index: auto; margin: 0;">
            <span class="military-tag" style="font-size: 14px;">üåê</span>
            <select id="langSelect" style="background:transparent; border:none; color:var(--neon-green); font-family:'Roboto Mono'; font-weight:bold; outline:none; cursor:pointer;">
              <option value="en">EN</option>
              <option value="hi">HI</option>
              <option value="mr">MR</option>
              <option value="ne">NE</option>
            </select>
          </div>
	          <button class="btn-cyber" id="printBtn">EXPORT_DATA</button>
	          <button class="btn-cyber btn-demo-top" id="indoorDemoBtnTop">RUN_DEMO</button>
	          <button class="btn-cyber" onclick="logout()">LOGOUT</button>
	        </div>
	      </header>

      <section class="grid-top reveal" id="topCards">
        <div class="card cyber-card crosshair" id="tempCard">
          <div class="corner-br"></div>
          <div class="block-icon">üå°Ô∏è</div>
          <h4 class="military-tag">Temperature</h4>
          <div class="value stat-value" id="cardTemp">-- ¬∞C</div>
          <div class="military-tag" id="cardTempTime" style="font-size: 9px; margin-top: 5px;"></div>
        </div>

        <div class="card cyber-card" id="humCard">
          <div class="corner-br"></div>
          <div class="block-icon">üíß</div>
          <h4 class="military-tag">Humidity</h4>
          <div class="value stat-value" id="cardHum">-- %</div>
          <div class="military-tag" id="cardHumTime" style="font-size: 9px; margin-top: 5px;"></div>
        </div>

        <div class="card cyber-card" id="soilCard">
          <div class="corner-br"></div>
          <div class="block-icon">üß™</div>
          <h4 class="military-tag" id="cardSoilLabel">AMMONIA_PPM</h4>
          <div class="value stat-value" id="cardSoil">--</div>
          <div class="military-tag" id="cardSoilTime" style="font-size: 9px; margin-top: 5px;"></div>
        </div>

        <div class="card cyber-card" id="airCard">
          <div class="corner-br"></div>
          <div class="block-icon">üå´Ô∏è</div>
          <h4 class="military-tag" id="cardAirLabel">CO2_DENSITY</h4>
          <div class="value stat-value" id="cardAir">--</div>
          <div class="military-tag" id="cardAirTime" style="font-size: 9px; margin-top: 5px;"></div>
        </div>
      </section>

      <section class="content-row reveal">
        <div class="big-card cyber-card" style="position: relative;">
          <div class="corner-br"></div>
          <h3 class="military-tag" style="margin-bottom: 20px;">TELEMETRY_STREAM</h3>
          <div id="indoorCharts"><div class="chart-container"><canvas id="indoorTempChart"></canvas></div><div class="chart-container"><canvas id="indoorHumChart"></canvas></div></div>
          <div style="display:flex;justify-content:flex-end;gap:10px"><button class="btn-cyber" id="toggleLive">PAUSE_LIVE</button><button class="btn-cyber" id="downloadPNG">DOWNLOAD_STREAM</button></div>
          <div id="aiInlineLoader" class="ai-inline-loader">
            <div class="ai-inline-card">
              <svg class="ai-infinity" viewBox="-2 -2 44 44" aria-hidden="true">
                <path
                  class="track"
                  fill="none"
                  stroke-width="4"
                  pathLength="100"
                  d="M29.76 18.72 c0 7.28-3.92 13.6-9.84 16.96 c-2.88 1.68-6.24 2.64-9.84 2.64 c-3.6 0-6.88-0.96-9.76-2.64 c0-7.28 3.92-13.52 9.84-16.96 c2.88-1.68 6.24-2.64 9.76-2.64 S26.88 17.04 29.76 18.72 c5.84 3.36 9.76 9.68 9.84 16.96 c-2.88 1.68-6.24 2.64-9.76 2.64 c-3.6 0-6.88-0.96-9.84-2.64 c-5.84-3.36-9.76-9.68-9.76-16.96 c0-7.28 3.92-13.6 9.76-16.96 C25.84 5.12 29.76 11.44 29.76 18.72z"
                />

                <path
                  class="live"
                  fill="none"
                  stroke-width="4"
                  stroke-dasharray="15, 85"
                  stroke-dashoffset="0"
                  stroke-linecap="round"
                  pathLength="100"
                  d="M29.76 18.72 c0 7.28-3.92 13.6-9.84 16.96 c-2.88 1.68-6.24 2.64-9.84 2.64 c-3.6 0-6.88-0.96-9.76-2.64 c0-7.28 3.92-13.52 9.84-16.96 c2.88-1.68 6.24-2.64 9.76-2.64 S26.88 17.04 29.76 18.72 c5.84 3.36 9.76 9.68 9.84 16.96 c-2.88 1.68-6.24 2.64-9.76 2.64 c-3.6 0-6.88-0.96-9.84-2.64 c-5.84-3.36-9.76-9.68-9.76-16.96 c0-7.28 3.92-13.6 9.76-16.96 C25.84 5.12 29.76 11.44 29.76 18.72z"
                />
              </svg>
              <div class="military-tag" style="color: var(--neon-green); font-size: 10px;">SYNTHESIZING_NEURAL_RESPONSE...</div>
            </div>
          </div>
            </div>
        <div class="big-card cyber-card">
          <div class="corner-br"></div>
          <h3 class="military-tag" style="margin-bottom: 20px;">TEMPERATURE</h3>
          <div style="display:flex; gap:10px; margin-bottom: 12px;">
            <input id="weatherCityInput" placeholder="Search city..." style="flex:1; background: var(--input-bg); border: 1px solid var(--cyber-border); color: var(--text-primary); padding: 10px; font-family: 'Roboto Mono', monospace;" />
            <button class="btn-cyber" id="weatherSearchBtn">SEARCH_WEATHER</button>
          </div>
          <div id="farmLocation" class="data-mono glow-text" style="font-size: 18px; font-weight: bold; margin-bottom: 15px;"></div>
          <div id="currentWeather" style="display: flex; align-items: center; gap: 15px; margin-bottom:20px;"><span id="weatherIcon" style="font-size: 40px;" class="spin-slow"></span><span id="weatherDescription" class="military-tag" style="font-size: 14px; color: var(--neon-green)"></span></div>
          <div class="weather-card cyber-card" style="margin-bottom: 20px;"><div class="corner-br"></div><div style="display:grid; grid-template-columns: 1fr 1fr; gap: 15px;"><div><small class="military-tag">EXT_TEMP</small><div id="tempVal" class="value" style="font-size: 18px;">-- ¬∞C</div></div><div><small class="military-tag">EXT_HUM</small><div id="humVal" class="value" style="font-size: 18px;">-- %</div></div><div style="grid-column: span 2;"><small class="military-tag">WIND_VELOCITY</small><div id="windVal" class="value" style="font-size: 18px;">-- km/h</div></div></div></div>
	          <div style="margin-top: 30px;"><h4 class="military-tag" style="font-size: 11px; margin-bottom: 15px;">SYSTEM_CONTROL</h4><div style="display:grid; grid-template-columns: 1fr 1fr; gap: 10px;"><button class="btn-cyber" id="refreshBtn" onclick="location.reload()">RE-SYNC</button><button class="btn-cyber" id="clearBtn">PURGE</button><button class="btn-cyber" id="indoorDemoBtn">RUN_INDOOR_DEMO</button><button class="btn-cyber" id="testGrokBtn">TEST_GEMINI_AI</button></div></div>
          <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--cyber-border);"><h4 class="military-tag" style="font-size: 11px; margin-bottom: 15px;">DATA_VISUALIZATION</h4><div style="display:flex; flex-direction: column; gap: 12px;"><div><label class="military-tag" style="font-size: 9px; display: block; margin-bottom: 5px;">RENDER_MODE</label><select id="chartTypeSelect" class="btn-cyber" style="width:100%; appearance: none; "><option value="line">LINE_GRAPH</option><option value="bar">BAR_CHART</option><option value="area">AREA_SCAN</option></select></div><div><label class="military-tag" style="font-size: 9px; display: block; margin-bottom: 5px;">TIME_WINDOW</label><select id="timeRangeSelect" class="btn-cyber" style="width:100%; appearance: none; "><option value="1h">1_HOUR</option><option value="6h">6_HOURS</option><option value="24h" selected>24_HOURS</option><option value="week">1_WEEK</option></select></div></div></div>
        </div>
      </section>

      <section id="indoorAlerts" class="metrics-row reveal">
        <div class="metric cyber-card"><div class="corner-br"></div><div class="military-tag">Fire Alert</div><div style="font-size:24px; font-weight:900; margin-top:10px; color: var(--neon-green)" id="irFireStatus">--</div></div>
        <div class="metric cyber-card"><div class="corner-br"></div><div class="military-tag">Rodent Alert</div><div style="font-size:24px; font-weight:900; margin-top:10px; color: var(--neon-green)" id="rodentStatus">--</div></div>
      </section>
    </main>
  </div>
</div>

<div id="indoorDemoToast" aria-live="polite"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>

<script>
// Dashboard State
 [
  {
    name: 'TEMP_HUMIDITY_EVENT',
    focus: ['temp', 'hum'],
    temp: 39.7,
    hum: 92.8,
    nh3: 22.0,
    co2: 760,
    success: true
  },
  {
    name: 'TEMP_NH3_EVENT',
    focus: ['temp', 'nh3'],
    temp: 37.9,
    hum: 58.4,
    nh3: 82.4,
    co2: 980,
    success: false
  },
  {
    name: 'NH3_HUMIDITY_CO2_EVENT',
    focus: ['nh3', 'hum', 'co2'],
    temp: 30.6,
    hum: 88.1,
    nh3: 74.3,
    co2: 1860,
    success: true
  }
];

function showIndoorDemoToast(message, type) {
  var toast = document.getElementById('indoorDemoToast');
  if (!toast) return;
  toast.className = '';
  toast.textContent = message;
  if (type) toast.classList.add(type);
  toast.classList.add('show');
  if (indoorDemoToastTimer) clearTimeout(indoorDemoToastTimer);
  indoorDemoToastTimer = setTimeout(function () {
    toast.classList.remove('show');
  }, 2600);
}
